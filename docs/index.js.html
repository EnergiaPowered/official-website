<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from "react";
import "./style.css";

const EMAIL_REGEX = /^(([^&lt;>()[\]\\.,;:\s@"]+(\.[^&lt;>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

export default function ContactForm(props) {
  const [name, setName] = useState({ value: "", error: "" });
  const [email, setEmail] = useState({ value: "", error: "" });
  const [message, setMessage] = useState({ value: "", error: "" });

  useEffect(() => {
    window.scrollTo(0, 0)
  }, [])

  /**
   * Validate the field 
   * 
   * @param {string} field 
   */
  function validate(field) {
    switch (field) {
      case "name":
        if (name.value.trim() === "")
          setName({
            value: name.value,
            error: "This field is required"
          });
        else {
          setName({
            value: name.value.trim(),
            error: ""
          });
          return true;
        }
        break;
      case "email":
        if (email.value.trim() === "")
          setEmail({
            value: email.value.trim(),
            error: "This field is required"
          });
        else if (!EMAIL_REGEX.test(email.value))
          setEmail({
            value: email.value.trim(),
            error: "Please enter a valid email"
          });
        else {
          setEmail({
            value: email.value.trim(),
            error: ""
          });
          return true;
        }
        break;
      case "message":
        if (message.value.trim() === "")
          setMessage({
            value: message.value.trim(),
            error: "This field is required"
          });
        else {
          setMessage({
            value: message.value.trim(),
            error: ""
          });
          return true;
        }
        break;
      default:
        return;
    }
    return false;
  }

  /**
   * Validate all fields
   */
  function validateAll() {
    let isValid = true;
    //This repetition is to avoid the default short-circuit evaluation of the logic AND
    isValid &amp;= validate("name");
    isValid &amp;= validate("email");
    isValid &amp;= validate("message");
    return isValid;
  }



  /**
   * Change the values of the states on change
   * 
   * @param {object} e 
   */
  function changeHandler(e) {
    name.value = e.currentTarget.name.value;
    email.value = e.currentTarget.email.value;
    message.value = e.currentTarget.message.value;
    validate(e.target.id);
  }

  /**
   * Submit to the backend if the fields are valid
   * 
   * @param {object} e 
   */
  function submitHandler(e) {
    e.preventDefault();
    if (validateAll()) {
      props.onSubmit(name.value, email.value, message.value);
    }
  }

  return (
    &lt;article className="bg-section" id="contact-form">
      &lt;h2 className="section-title text-center">Leave a message&lt;/h2>
      &lt;form
        onChange={changeHandler}
        onSubmit={submitHandler}
        noValidate
      >
        &lt;div className="flex-row-2">
          &lt;div className="box">
            &lt;label htmlFor="name">
              Name{" "}
              &lt;span className="sup-span">
                &lt;sup>*&lt;/sup>
              &lt;/span>
            &lt;/label>
            &lt;input type="text" name="name" id="name" />
            {name.error &amp;&amp; &lt;p className="error-message">{name.error}&lt;/p>}
          &lt;/div>
          &lt;div className="box">
            &lt;label htmlFor="email">
              Email{" "}
              &lt;span className="sup-span">
                &lt;sup>*&lt;/sup>
              &lt;/span>
            &lt;/label>
            &lt;input type="text" name="email" id="email" />
            {email.error &amp;&amp; &lt;p className="error-message">{email.error}&lt;/p>}
          &lt;/div>
          &lt;div className="box">
            &lt;label htmlFor="message">
              Your Message{" "}
              &lt;span className="sup-span">
                &lt;sup>*&lt;/sup>
              &lt;/span>
            &lt;/label>
            &lt;textarea name="message" id="message">&lt;/textarea>
            {message.error &amp;&amp; &lt;p className="error-message">{message.error}&lt;/p>}
          &lt;/div>
        &lt;/div>
        &lt;input type="submit" value="SEND" />
      &lt;/form>
    &lt;/article>
  );
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri Apr 23 2021 13:49:26 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
